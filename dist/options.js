(()=>{"use strict";var e,s={21:(e,s,t)=>{var i=t(848),a=t(540),n=t(338),l=t(329);const c=({onClose:e})=>{const[s]=(0,a.useState)(()=>l.h.getInstance()),[t,n]=(0,a.useState)(s.getAll()),[c,r]=(0,a.useState)("general"),[o,d]=(0,a.useState)(null),[h,u]=(0,a.useState)(!1),[g,p]=(0,a.useState)(""),[x,j]=(0,a.useState)(null);(0,a.useEffect)(()=>{m(),b()},[]);const m=async()=>{try{const e=await s.getDataUsage();d(e)}catch(e){console.error("Failed to load data usage:",e)}},b=()=>{try{const e=s.getSettingsSummary();j(e)}catch(e){console.error("Failed to load settings summary:",e)}},v=async(e,i)=>{try{await s.set(e,i),n({...t,[e]:i}),b(),p("Setting updated successfully"),setTimeout(()=>p(""),3e3)}catch(e){p("Failed to update setting"),setTimeout(()=>p(""),3e3)}},y=async(e,s)=>{const i={...t.accessibilityOptions,[e]:s};await v("accessibilityOptions",i),b()},N=async e=>{try{u(!0),await s.resetCategory(e),n(s.getAll()),p(`${e} settings reset to defaults`),setTimeout(()=>p(""),3e3)}catch(e){p("Failed to reset settings"),setTimeout(()=>p(""),3e3)}finally{u(!1)}},f=async()=>{if(window.confirm("Are you sure you want to clear all user data? This action cannot be undone."))try{u(!0),await s.clearUserData(),n(s.getAll()),p("All user data cleared successfully"),setTimeout(()=>p(""),3e3),await m()}catch(e){p("Failed to clear user data"),setTimeout(()=>p(""),3e3)}finally{u(!1)}};return(0,i.jsxs)("div",{className:"settings-page",children:[(0,i.jsxs)("div",{className:"settings-header",children:[(0,i.jsx)("h1",{children:"LearnSphere Settings"}),(0,i.jsx)("button",{className:"close-button",onClick:e,children:"Ã—"})]}),(0,i.jsxs)("div",{className:"settings-content",children:[(0,i.jsx)("div",{className:"settings-sidebar",children:[{id:"general",label:"General",icon:"âš™ï¸"},{id:"ai",label:"AI Settings",icon:"ðŸ¤–"},{id:"quiz",label:"Quiz Settings",icon:"ðŸ§ "},{id:"chat",label:"Chat Settings",icon:"ðŸ’¬"},{id:"privacy",label:"Privacy & Data",icon:"ðŸ”’"},{id:"accessibility",label:"Accessibility",icon:"â™¿"},{id:"highlights",label:"Highlights",icon:"ðŸ–ï¸"}].map(e=>(0,i.jsxs)("button",{className:"tab-button "+(c===e.id?"active":""),onClick:()=>r(e.id),children:[(0,i.jsx)("span",{className:"tab-icon",children:e.icon}),e.label]},e.id))}),(0,i.jsx)("div",{className:"settings-main",children:(()=>{switch(c){case"general":default:return(0,i.jsxs)("div",{className:"settings-tab",children:[(0,i.jsx)("h3",{children:"General Settings"}),x&&(0,i.jsxs)("div",{className:"settings-summary",children:[(0,i.jsx)("h4",{children:"Settings Overview"}),(0,i.jsxs)("div",{className:"summary-stats",children:[(0,i.jsxs)("div",{className:"stat-item",children:[(0,i.jsx)("span",{className:"stat-label",children:"Configured:"}),(0,i.jsxs)("span",{className:"stat-value",children:[x.configuredSettings,"/",x.totalSettings]})]}),x.criticalSettings.length>0&&(0,i.jsxs)("div",{className:"critical-warnings",children:[(0,i.jsx)("span",{className:"warning-icon",children:"âš ï¸"}),(0,i.jsx)("span",{className:"warning-text",children:"Critical settings missing"})]}),x.warnings.length>0&&(0,i.jsxs)("div",{className:"warnings",children:[(0,i.jsx)("span",{className:"warning-icon",children:"â„¹ï¸"}),(0,i.jsxs)("span",{className:"warning-text",children:[x.warnings.length," warning(s)"]})]})]})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsx)("label",{children:"Theme"}),(0,i.jsxs)("select",{value:t.theme,onChange:e=>v("theme",e.target.value),children:[(0,i.jsx)("option",{value:"light",children:"Light"}),(0,i.jsx)("option",{value:"dark",children:"Dark"}),(0,i.jsx)("option",{value:"auto",children:"Auto (System)"})]}),(0,i.jsx)("p",{className:"setting-description",children:"Choose your preferred theme"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsx)("label",{children:"Language"}),(0,i.jsxs)("select",{value:t.language,onChange:e=>v("language",e.target.value),children:[(0,i.jsx)("option",{value:"en",children:"English"}),(0,i.jsx)("option",{value:"es",children:"EspaÃ±ol"}),(0,i.jsx)("option",{value:"fr",children:"FranÃ§ais"}),(0,i.jsx)("option",{value:"de",children:"Deutsch"}),(0,i.jsx)("option",{value:"zh",children:"ä¸­æ–‡"}),(0,i.jsx)("option",{value:"ja",children:"æ—¥æœ¬èªž"})]}),(0,i.jsx)("p",{className:"setting-description",children:"Select your preferred language"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:t.enableNotifications,onChange:e=>v("enableNotifications",e.target.checked)}),"Enable Notifications"]}),(0,i.jsx)("p",{className:"setting-description",children:"Show notifications for important events"})]})]});case"ai":return(0,i.jsxs)("div",{className:"settings-tab",children:[(0,i.jsx)("h3",{children:"AI Configuration"}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsx)("label",{children:"Gemini API Key"}),(0,i.jsxs)("div",{className:"api-key-input-group",children:[(0,i.jsx)("input",{type:"password",value:t.geminiApiKey,onChange:e=>v("geminiApiKey",e.target.value),placeholder:"Enter your Gemini API key"}),(0,i.jsx)("button",{className:"test-api-button",onClick:async()=>{if(t.geminiApiKey){u(!0);try{const e=await s.testApiKey(t.geminiApiKey);e.valid?p("API key is valid!"):p(`API key test failed: ${e.error}`)}catch(e){p("Failed to test API key")}finally{u(!1),setTimeout(()=>p(""),5e3)}}},disabled:!t.geminiApiKey||h,children:"Test"})]}),(0,i.jsxs)("p",{className:"setting-description",children:["Get your API key from"," ",(0,i.jsx)("a",{href:"https://makersuite.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",children:"Google AI Studio"})]})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsx)("label",{children:"Max Tokens"}),(0,i.jsx)("input",{type:"number",value:t.maxTokens,onChange:e=>v("maxTokens",parseInt(e.target.value)),min:"100",max:"8192",step:"100"}),(0,i.jsx)("p",{className:"setting-description",children:"Maximum tokens for AI responses (100-8192)"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsx)("label",{children:"Temperature"}),(0,i.jsx)("input",{type:"range",value:t.temperature,onChange:e=>v("temperature",parseFloat(e.target.value)),min:"0",max:"1",step:"0.1"}),(0,i.jsx)("span",{className:"range-value",children:t.temperature}),(0,i.jsx)("p",{className:"setting-description",children:"Controls randomness in AI responses (0 = focused, 1 = creative)"})]}),(0,i.jsx)("button",{className:"reset-button",onClick:()=>N("ai"),disabled:h,children:"Reset AI Settings"})]});case"quiz":return(0,i.jsxs)("div",{className:"settings-tab",children:[(0,i.jsx)("h3",{children:"Quiz Configuration"}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsx)("label",{children:"Default Difficulty"}),(0,i.jsxs)("select",{value:t.defaultQuizDifficulty,onChange:e=>v("defaultQuizDifficulty",e.target.value),children:[(0,i.jsx)("option",{value:"easy",children:"Easy"}),(0,i.jsx)("option",{value:"medium",children:"Medium"}),(0,i.jsx)("option",{value:"hard",children:"Hard"})]}),(0,i.jsx)("p",{className:"setting-description",children:"Default difficulty for generated quizzes"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsx)("label",{children:"Default Question Count"}),(0,i.jsxs)("select",{value:t.defaultQuizQuestionCount,onChange:e=>v("defaultQuizQuestionCount",parseInt(e.target.value)),children:[(0,i.jsx)("option",{value:"5",children:"5 Questions"}),(0,i.jsx)("option",{value:"10",children:"10 Questions"}),(0,i.jsx)("option",{value:"15",children:"15 Questions"}),(0,i.jsx)("option",{value:"20",children:"20 Questions"})]}),(0,i.jsx)("p",{className:"setting-description",children:"Default number of questions per quiz"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:t.enableQuizHints,onChange:e=>v("enableQuizHints",e.target.checked)}),"Enable Quiz Hints"]}),(0,i.jsx)("p",{className:"setting-description",children:"Show helpful hints during quizzes"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:t.enableQuizExplanations,onChange:e=>v("enableQuizExplanations",e.target.checked)}),"Enable Quiz Explanations"]}),(0,i.jsx)("p",{className:"setting-description",children:"Show explanations for correct answers"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:t.autoSaveQuizResults,onChange:e=>v("autoSaveQuizResults",e.target.checked)}),"Auto-save Quiz Results"]}),(0,i.jsx)("p",{className:"setting-description",children:"Automatically save quiz results for analysis"})]}),(0,i.jsx)("button",{className:"reset-button",onClick:()=>N("quiz"),disabled:h,children:"Reset Quiz Settings"})]});case"chat":return(0,i.jsxs)("div",{className:"settings-tab",children:[(0,i.jsx)("h3",{children:"Chat Sidebar Configuration"}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsx)("label",{children:"Sidebar Position"}),(0,i.jsxs)("select",{value:t.chatSidebarPosition,onChange:e=>v("chatSidebarPosition",e.target.value),children:[(0,i.jsx)("option",{value:"left",children:"Left"}),(0,i.jsx)("option",{value:"right",children:"Right"})]}),(0,i.jsx)("p",{className:"setting-description",children:"Choose where the chat sidebar appears"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsx)("label",{children:"Sidebar Width"}),(0,i.jsx)("input",{type:"range",value:t.chatSidebarWidth,onChange:e=>v("chatSidebarWidth",parseInt(e.target.value)),min:"300",max:"600",step:"25"}),(0,i.jsxs)("span",{className:"range-value",children:[t.chatSidebarWidth,"px"]}),(0,i.jsx)("p",{className:"setting-description",children:"Adjust the width of the chat sidebar"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:t.autoOpenChat,onChange:e=>v("autoOpenChat",e.target.checked)}),"Auto-open Chat"]}),(0,i.jsx)("p",{className:"setting-description",children:"Automatically open chat when selecting text"})]}),(0,i.jsx)("button",{className:"reset-button",onClick:()=>N("chat"),disabled:h,children:"Reset Chat Settings"})]});case"privacy":return(0,i.jsxs)("div",{className:"settings-tab",children:[(0,i.jsx)("h3",{children:"Privacy & Data Management"}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:t.enableLearningAnalytics,onChange:e=>v("enableLearningAnalytics",e.target.checked)}),"Enable Learning Analytics"]}),(0,i.jsx)("p",{className:"setting-description",children:"Track learning progress and performance"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsx)("label",{children:"Data Retention Period"}),(0,i.jsxs)("select",{value:t.dataRetentionDays,onChange:e=>v("dataRetentionDays",parseInt(e.target.value)),children:[(0,i.jsx)("option",{value:"30",children:"30 days"}),(0,i.jsx)("option",{value:"90",children:"90 days"}),(0,i.jsx)("option",{value:"180",children:"180 days"}),(0,i.jsx)("option",{value:"365",children:"1 year"}),(0,i.jsx)("option",{value:"0",children:"Keep forever"})]}),(0,i.jsx)("p",{className:"setting-description",children:"How long to keep your learning data"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:t.enableCloudSync,onChange:e=>v("enableCloudSync",e.target.checked)}),"Enable Cloud Sync"]}),(0,i.jsx)("p",{className:"setting-description",children:"Sync settings across devices (requires Google account)"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:t.privacyMode,onChange:e=>v("privacyMode",e.target.checked)}),"Privacy Mode"]}),(0,i.jsx)("p",{className:"setting-description",children:"Minimize data collection and storage"})]}),o&&(0,i.jsxs)("div",{className:"data-usage",children:[(0,i.jsx)("h4",{children:"Data Usage"}),(0,i.jsxs)("p",{children:["Local Storage: ",o.estimatedSize]}),(0,i.jsx)("button",{className:"danger-button",onClick:f,disabled:h,children:"Clear All User Data"})]}),(0,i.jsx)("button",{className:"reset-button",onClick:()=>N("privacy"),disabled:h,children:"Reset Privacy Settings"})]});case"accessibility":return(0,i.jsxs)("div",{className:"settings-tab",children:[(0,i.jsx)("h3",{children:"Accessibility Options"}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:t.accessibilityOptions.highContrast,onChange:e=>y("highContrast",e.target.checked)}),"High Contrast Mode"]}),(0,i.jsx)("p",{className:"setting-description",children:"Increase contrast for better visibility"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:t.accessibilityOptions.largeText,onChange:e=>y("largeText",e.target.checked)}),"Large Text"]}),(0,i.jsx)("p",{className:"setting-description",children:"Increase text size for better readability"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:t.accessibilityOptions.reduceMotion,onChange:e=>y("reduceMotion",e.target.checked)}),"Reduce Motion"]}),(0,i.jsx)("p",{className:"setting-description",children:"Minimize animations and transitions"})]}),(0,i.jsx)("button",{className:"reset-button",onClick:()=>N("accessibility"),disabled:h,children:"Reset Accessibility Settings"})]});case"highlights":return(0,i.jsxs)("div",{className:"settings-tab",children:[(0,i.jsx)("h3",{children:"Highlight Configuration"}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",checked:t.autoSaveHighlights,onChange:e=>v("autoSaveHighlights",e.target.checked)}),"Auto-save Highlights"]}),(0,i.jsx)("p",{className:"setting-description",children:"Automatically save highlights to storage"})]}),(0,i.jsxs)("div",{className:"setting-group",children:[(0,i.jsx)("label",{children:"Highlight Colors"}),(0,i.jsx)("div",{className:"color-picker",children:t.highlightColors.map((e,s)=>(0,i.jsx)("input",{type:"color",value:e,onChange:e=>{const i=[...t.highlightColors];i[s]=e.target.value,v("highlightColors",i)},title:`Color ${s+1}`},s))}),(0,i.jsx)("p",{className:"setting-description",children:"Customize the colors available for highlighting"})]})]})}})()})]}),(0,i.jsxs)("div",{className:"settings-footer",children:[(0,i.jsxs)("div",{className:"import-export",children:[(0,i.jsxs)("label",{className:"import-button",children:["Import All Data",(0,i.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files?.[0];if(t){const e=new FileReader;e.onload=async e=>{try{u(!0);const t=e.target?.result;await s.importAllUserData(t),n(s.getAll()),await m(),p("All data imported successfully"),setTimeout(()=>p(""),3e3)}catch(e){p("Failed to import data: "+(e instanceof Error?e.message:"Unknown error")),setTimeout(()=>p(""),5e3)}finally{u(!1)}},e.readAsText(t)}},style:{display:"none"}})]}),(0,i.jsx)("button",{className:"export-button",onClick:async()=>{try{u(!0);const e=await s.exportAllUserData(),t=new Blob([e],{type:"application/json"}),i=URL.createObjectURL(t),a=document.createElement("a");a.href=i,a.download=`learnsphere-data-${(new Date).toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(i),p("All data exported successfully"),setTimeout(()=>p(""),3e3)}catch(e){p("Failed to export data"),setTimeout(()=>p(""),3e3)}finally{u(!1)}},children:"Export All Data"})]}),(0,i.jsx)("div",{className:"reset-all",children:(0,i.jsx)("button",{className:"reset-all-button",onClick:()=>s.reset(),disabled:h,children:"Reset All Settings"})}),g&&(0,i.jsx)("div",{className:"message "+(g.includes("successfully")?"success":"error"),children:g})]})]})};n.createRoot(document.getElementById("root")).render((0,i.jsx)(a.StrictMode,{children:(0,i.jsx)(()=>(0,i.jsx)("div",{className:"options-container",children:(0,i.jsx)(c,{})}),{})}))}},t={};function i(e){var a=t[e];if(void 0!==a)return a.exports;var n=t[e]={exports:{}};return s[e](n,n.exports,i),n.exports}i.m=s,e=[],i.O=(s,t,a,n)=>{if(!t){var l=1/0;for(d=0;d<e.length;d++){for(var[t,a,n]=e[d],c=!0,r=0;r<t.length;r++)(!1&n||l>=n)&&Object.keys(i.O).every(e=>i.O[e](t[r]))?t.splice(r--,1):(c=!1,n<l&&(l=n));if(c){e.splice(d--,1);var o=a();void 0!==o&&(s=o)}}return s}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[t,a,n]},i.d=(e,s)=>{for(var t in s)i.o(s,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},i.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={575:0};i.O.j=s=>0===e[s];var s=(s,t)=>{var a,n,[l,c,r]=t,o=0;if(l.some(s=>0!==e[s])){for(a in c)i.o(c,a)&&(i.m[a]=c[a]);if(r)var d=r(i)}for(s&&s(t);o<l.length;o++)n=l[o],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(d)},t=self.webpackChunklearnsphere_ce=self.webpackChunklearnsphere_ce||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})();var a=i.O(void 0,[179,329],()=>i(21));a=i.O(a)})();